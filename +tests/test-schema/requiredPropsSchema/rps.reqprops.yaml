# nwb-schema-language 2.2.0
datasets:
  # Dataset for testing that can be placed in the scratch group
  - neurodata_type_def: TestData
    neurodata_type_inc: ScratchData
    doc: A base data type for testing using the scratch group
    attributes:
      - name: notes
        doc: Override notes to optional so that it does not interfere with testing
        dtype: text
        required: false
    
  # Dataset with required attributes
  - neurodata_type_def: DatasetWithRequiredAttr
    neurodata_type_inc: TestData
    doc: A dataset with required attributes
    dtype: float
    attributes:
      - name: required_attr
        doc: A required attribute
        dtype: text
        required: true
      - name: optional_attr
        doc: An optional attribute
        dtype: text
        required: false
        
  # Base dataset with optional attributes
  - neurodata_type_def: BaseDataset
    neurodata_type_inc: TestData
    doc: A base dataset with optional attributes
    dtype: float
    attributes:
      - name: attr1
        doc: An optional attribute in the base class
        dtype: text
        required: false
      - name: attr2
        doc: Another optional attribute in the base class
        dtype: float
        required: false
        
  # Extended dataset that makes attributes required
  - neurodata_type_def: ExtendedDataset
    neurodata_type_inc: BaseDataset
    doc: An extended dataset that makes attributes required
    attributes:
      - name: attr1
        doc: Now a required attribute in the extended class
        dtype: text
        required: true
      - name: attr3
        doc: A new required attribute in the extended class
        dtype: int
        required: true
        
  # Base dataset with required attributes
  - neurodata_type_def: BaseDatasetWithRequired
    neurodata_type_inc: TestData
    doc: A base dataset with required attributes
    dtype: float
    attributes:
      - name: req_attr
        doc: A required attribute in the base class
        dtype: text
        required: true
      - name: opt_attr
        doc: An optional attribute in the base class
        dtype: float
        required: false
        
  # Extended dataset that makes required attributes optional
  - neurodata_type_def: ExtendedDatasetWithOptional
    neurodata_type_inc: BaseDatasetWithRequired
    doc: An extended dataset that makes required attributes optional
    attributes:
      - name: req_attr
        doc: Now an optional attribute in the extended class
        dtype: text
        required: false
      - name: new_attr
        doc: A new optional attribute in the extended class
        dtype: int
        required: false

groups:
  # Group with optional subgroups
  - name: required_group_with_optional_subgroups
    doc: Group with optional subgroups
    groups:
    - neurodata_type_inc: NWBDataInterface
      doc: First subgroup.
      quantity: '*'
    - neurodata_type_inc: DynamicTable
      doc: Second subgroup.
      quantity: '*'
      
  # Group with required datasets
  - neurodata_type_def: GroupWithRequiredDatasets
    neurodata_type_inc: NWBDataInterface
    doc: A group with required datasets
    datasets:
      - name: required_dataset
        doc: A required dataset
        dtype: float
        quantity: 1
      - name: optional_dataset
        doc: An optional dataset
        dtype: text
        quantity: '?'
        
  # Group with required links
  - neurodata_type_def: GroupWithRequiredLinks
    neurodata_type_inc: NWBDataInterface
    doc: A group with required links
    links:
      - name: required_link
        doc: A required link
        target_type: NWBDataInterface
        quantity: '1'
      - name: optional_link
        doc: An optional link
        target_type: NWBDataInterface
        quantity: '?'
        
  # Base group with optional components
  - neurodata_type_def: BaseGroup
    neurodata_type_inc: NWBDataInterface
    doc: A base group with optional components
    datasets:
      - name: dataset1
        doc: An optional dataset
        dtype: float
        quantity: '?'
    groups:
      - name: subgroup1
        doc: An optional subgroup
        quantity: '?'
        groups:
        - neurodata_type_inc: NWBDataInterface
          doc: Test container.
          quantity: '*'
    attributes:
      - name: attr1
        doc: An optional attribute
        dtype: text
        required: false
        
  # Extended group that makes components required
  - neurodata_type_def: ExtendedGroup
    neurodata_type_inc: BaseGroup
    doc: An extended group that makes components required
    datasets:
      - name: dataset1
        doc: Now a required dataset
        dtype: float
        quantity: 1
    groups:
      - name: subgroup1
        doc: Now a required subgroup
        quantity: 1
        groups:
        - neurodata_type_inc: NWBDataInterface
          doc: Test container.
          quantity: '+'
    attributes:
      - name: attr1
        doc: Now a required attribute
        dtype: text
        required: true
        
  # Group with mixed required and optional properties
  - neurodata_type_def: MixedRequiredGroup
    neurodata_type_inc: NWBContainer
    doc: A group with mixed required and optional properties
    datasets:
      - name: required_dataset
        doc: A required dataset
        dtype: float
        quantity: 1
      - name: optional_dataset
        doc: An optional dataset
        dtype: text
        quantity: '?'
    groups:
      - name: required_group
        doc: A required subgroup
        quantity: 1
        groups:
        - neurodata_type_inc: NWBContainer
          doc: Test interface for required group.
          quantity: '+'
      - name: optional_group
        doc: An optional subgroup
        quantity: '?'
        groups:
        - neurodata_type_inc: NWBContainer
          doc: Test interface for optional group.
          quantity: '+'
    attributes:
      - name: required_attr
        doc: A required attribute
        dtype: text
        required: true
      - name: optional_attr
        doc: An optional attribute
        dtype: float
        required: false
    links:
      - name: required_link
        doc: A required link
        target_type: NWBDataInterface
        quantity: 1
      - name: optional_link
        doc: An optional link
        target_type: NWBDataInterface
        quantity: '?'
